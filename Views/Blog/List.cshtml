@model BlogListViewModel

@{
    ViewData["Title"] = "Blog";
}
<h1>@ViewData["Title"]</h1>

<form asp-controller = "Blog" enctype = "multipart/form-data">

    @if(User.Identity.IsAuthenticated)
    {
        <div class="mb-5 text-center" >
            <button asp-action = "Create" class = "btn btn-primary" type = "submit">
                +
            </button>
        </div>
    }

    @if (Model.Blogs.Count == 0)
    {
        <div>Empty</div>
    }
    else
    {
        @for (int i = 0; i < Model.Blogs.Count; i ++)
        {
            @if (i % 3 == 0)
            {
                @:<div class="row">
            }
            
            <div class="col-md-4 col-sm-12 mb-4 mb-md-0">
                <div class="container-lg">
                    <a asp-area="" asp-controller="Blog" asp-action="Post" asp-route-id="@Model.Blogs[i].Id">
                        <img   
                            src= @Model.Blogs[i].Image
                            style="object-fit: cover;"
                            class="shadow-1-strong rounded blog-image-thumbnail"
                            onerror="this.src = '@Define.Azure.DEFAULT_IMAGE'"
                        >
                    </a>
                    <h4 class="mb-5 mt-3">@Model.Blogs[i].Title</h4>
                </div>
            </div>

            @if (i % 3 == 2 || i == Model.Blogs.Count - 1)
            {
                @:</div>
            }
        }
    }

</form>

<script>
    function handleImageError(image) {
        // Add class to the image
        image.classList.add('shadow-1-strong rounded blog-image-thumbnail');

        // Change the image source
        image.src = '@Define.Azure.DEFAULT_IMAGE';
    }
</script>